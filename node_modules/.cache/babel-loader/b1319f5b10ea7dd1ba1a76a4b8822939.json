{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nvar React = require('react');\n\nvar core = require('@react-pdf-viewer/core');\n\nfunction _interopNamespace(e) {\n  if (e && e.__esModule) return e;\n  var n = Object.create(null);\n\n  if (e) {\n    Object.keys(e).forEach(function (k) {\n      if (k !== 'default') {\n        var d = Object.getOwnPropertyDescriptor(e, k);\n        Object.defineProperty(n, k, d.get ? d : {\n          enumerable: true,\n          get: function () {\n            return e[k];\n          }\n        });\n      }\n    });\n  }\n\n  n[\"default\"] = e;\n  return Object.freeze(n);\n}\n\nvar React__namespace = /*#__PURE__*/_interopNamespace(React);\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\n\n\nvar __assign = function () {\n  __assign = Object.assign || function __assign(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nvar Cover = function (_a) {\n  var getPageIndex = _a.getPageIndex,\n      store = _a.store;\n\n  var _b = React__namespace.useState(),\n      currentDoc = _b[0],\n      setCurrentDoc = _b[1];\n\n  var handleDocumentChanged = function (doc) {\n    setCurrentDoc(doc);\n  };\n\n  var devicePixelRatio = window.devicePixelRatio || 1;\n  var canvasRef = React__namespace.useRef();\n  var containerRef = React__namespace.useRef();\n\n  var _c = React__namespace.useState(false),\n      rendered = _c[0],\n      setRendered = _c[1];\n\n  React__namespace.useEffect(function () {\n    if (!currentDoc) {\n      return;\n    }\n\n    var containerEle = containerRef.current;\n    var canvasEle = canvasRef.current;\n\n    if (!containerEle || !canvasEle) {\n      return;\n    }\n\n    var numPages = currentDoc.numPages;\n    var targetPage = getPageIndex ? getPageIndex({\n      numPages: numPages\n    }) : 0;\n    var normalizePage = Math.max(0, Math.min(targetPage, numPages - 1));\n    currentDoc.getPage(normalizePage + 1).then(function (page) {\n      var viewport = page.getViewport({\n        scale: 1\n      });\n      var w = viewport.width;\n      var h = viewport.height;\n      var containerWidth = containerEle.clientWidth;\n      var containerHeight = containerEle.clientHeight;\n      var scaled = Math.min(containerWidth / w, containerHeight / h);\n      var canvasWidth = scaled * w;\n      var canvasHeight = scaled * h;\n      canvasEle.height = canvasHeight * devicePixelRatio;\n      canvasEle.width = canvasWidth * devicePixelRatio;\n      canvasEle.style.opacity = '0';\n      var canvasContext = canvasEle.getContext('2d', {\n        alpha: false\n      });\n      var renderViewport = page.getViewport({\n        rotation: 0,\n        scale: scaled * devicePixelRatio\n      });\n      var renderTask = page.render({\n        canvasContext: canvasContext,\n        viewport: renderViewport\n      });\n      renderTask.promise.then(function () {\n        setRendered(true);\n        canvasEle.style.removeProperty('opacity');\n      }, function () {\n        setRendered(true);\n      });\n    });\n  }, [currentDoc]);\n  React__namespace.useEffect(function () {\n    store.subscribe('doc', handleDocumentChanged);\n    return function () {\n      store.unsubscribe('doc', handleDocumentChanged);\n    };\n  }, []);\n  return React__namespace.createElement(\"div\", {\n    className: \"rpv-thumbnail__cover\",\n    ref: containerRef\n  }, !rendered && React__namespace.createElement(\"div\", {\n    className: \"rpv-thumbnail__cover-loader\"\n  }, React__namespace.createElement(core.Spinner, null)), React__namespace.createElement(\"canvas\", {\n    ref: canvasRef,\n    style: {\n      transform: \"scale(\" + 1 / devicePixelRatio + \")\",\n      transformOrigin: \"top left\"\n    }\n  }));\n};\n\nvar LabelsLoader = function (_a) {\n  var children = _a.children,\n      doc = _a.doc;\n\n  var _b = React__namespace.useState(),\n      labels = _b[0],\n      setLabels = _b[1];\n\n  React__namespace.useEffect(function () {\n    doc.getPageLabels().then(function (labels) {\n      setLabels(labels || []);\n    });\n  }, [doc]);\n  return labels ? children(labels) : React__namespace.createElement(\"div\", {\n    className: \"rpv-thumbnail__loader\"\n  }, React__namespace.createElement(core.Spinner, null));\n};\n\nvar scrollToBeVisible = function (ele, container) {\n  var top = ele.getBoundingClientRect().top - container.getBoundingClientRect().top;\n  var eleHeight = ele.clientHeight;\n  var containerHeight = container.clientHeight;\n\n  if (top < 0) {\n    container.scrollTop += top;\n    return;\n  }\n\n  if (top + eleHeight <= containerHeight) {\n    return;\n  }\n\n  container.scrollTop += top + eleHeight - containerHeight;\n};\n\nvar ThumbnailItem = function (_a) {\n  var page = _a.page,\n      pageHeight = _a.pageHeight,\n      pageIndex = _a.pageIndex,\n      pageWidth = _a.pageWidth,\n      rotation = _a.rotation,\n      thumbnailHeight = _a.thumbnailHeight,\n      thumbnailWidth = _a.thumbnailWidth;\n  var l10n = React__namespace.useContext(core.LocalizationContext).l10n;\n  var renderTask = React__namespace.useRef();\n\n  var _b = React__namespace.useState(''),\n      src = _b[0],\n      setSrc = _b[1];\n\n  var thumbnailLabel = l10n && l10n.thumbnail ? l10n.thumbnail.thumbnailLabel : 'Thumbnail of page {{pageIndex}}';\n  React__namespace.useEffect(function () {\n    var task = renderTask.current;\n\n    if (task) {\n      task.cancel();\n    }\n\n    var canvas = document.createElement('canvas');\n    var canvasContext = canvas.getContext('2d', {\n      alpha: false\n    });\n    var w = thumbnailWidth;\n    var h = w / (pageWidth / pageHeight);\n    var scale = w / pageWidth;\n    canvas.height = h;\n    canvas.width = w;\n    canvas.style.height = h + \"px\";\n    canvas.style.width = w + \"px\";\n    var viewport = page.getViewport({\n      rotation: rotation,\n      scale: scale\n    });\n    renderTask.current = page.render({\n      canvasContext: canvasContext,\n      viewport: viewport\n    });\n    renderTask.current.promise.then(function () {\n      return setSrc(canvas.toDataURL());\n    }, function () {});\n  }, [rotation]);\n  return !src ? React__namespace.createElement(core.Spinner, null) : React__namespace.createElement(\"img\", {\n    \"aria-label\": thumbnailLabel.replace('{{pageIndex}}', \"\" + (pageIndex + 1)),\n    src: src,\n    height: thumbnailHeight + \"px\",\n    width: thumbnailWidth + \"px\"\n  });\n};\n\nvar THUMBNAIL_WIDTH = 100;\n\nvar ThumbnailContainer = function (_a) {\n  var doc = _a.doc,\n      isActive = _a.isActive,\n      pageHeight = _a.pageHeight,\n      pageIndex = _a.pageIndex,\n      pageWidth = _a.pageWidth,\n      rotation = _a.rotation,\n      onActive = _a.onActive;\n\n  var _b = React__namespace.useState({\n    height: pageHeight,\n    isCalculated: false,\n    page: null,\n    viewportRotation: 0,\n    width: pageWidth\n  }),\n      pageSize = _b[0],\n      setPageSize = _b[1];\n\n  var visibilityRef = React__namespace.useRef({\n    isVisible: false,\n    ratio: 0\n  });\n  var isCalculated = pageSize.isCalculated,\n      page = pageSize.page,\n      height = pageSize.height,\n      width = pageSize.width;\n  var scale = width / height;\n  var isVertical = Math.abs(rotation) % 180 === 0;\n  var w = isVertical ? THUMBNAIL_WIDTH : THUMBNAIL_WIDTH / scale;\n  var h = isVertical ? THUMBNAIL_WIDTH / scale : THUMBNAIL_WIDTH;\n  React__namespace.useLayoutEffect(function () {\n    if (!isActive) {\n      return;\n    }\n\n    var ele = containerRef.current;\n    var visibility = visibilityRef.current;\n\n    if (!visibility.isVisible || visibility.ratio < 1) {\n      onActive(ele);\n    }\n  }, [isActive]);\n\n  var onVisibilityChanged = function (params) {\n    visibilityRef.current = params;\n\n    if (params.isVisible && !isCalculated) {\n      doc.getPage(pageIndex + 1).then(function (pdfPage) {\n        var viewport = pdfPage.getViewport({\n          scale: 1\n        });\n        setPageSize({\n          height: viewport.height,\n          isCalculated: true,\n          page: pdfPage,\n          viewportRotation: viewport.rotation,\n          width: viewport.width\n        });\n      });\n    }\n  };\n\n  var rotationNumber = (rotation + pageSize.viewportRotation) % 360;\n  var containerRef = core.useIntersectionObserver({\n    onVisibilityChanged: onVisibilityChanged\n  });\n  return React__namespace.createElement(\"div\", {\n    className: \"rpv-thumbnail__container\",\n    ref: containerRef,\n    style: {\n      height: h + \"px\",\n      width: w + \"px\"\n    }\n  }, !page ? React__namespace.createElement(core.Spinner, null) : React__namespace.createElement(ThumbnailItem, {\n    page: page,\n    pageHeight: isVertical ? height : width,\n    pageIndex: pageIndex,\n    pageWidth: isVertical ? width : height,\n    rotation: rotationNumber,\n    thumbnailHeight: h,\n    thumbnailWidth: w\n  }));\n};\n\nvar ThumbnailList = function (_a) {\n  var currentPage = _a.currentPage,\n      doc = _a.doc,\n      pageHeight = _a.pageHeight,\n      pageWidth = _a.pageWidth,\n      renderCurrentPageLabel = _a.renderCurrentPageLabel,\n      rotation = _a.rotation,\n      onJumpToPage = _a.onJumpToPage;\n  var numPages = doc.numPages;\n  var containerRef = React__namespace.useRef(null);\n  var thumbnailsRef = React__namespace.useRef([]);\n\n  var _b = React__namespace.useState(currentPage),\n      currentFocused = _b[0],\n      setCurrentFocused = _b[1];\n\n  var direction = React__namespace.useContext(core.ThemeContext).direction;\n  var isRtl = direction === core.TextDirection.RightToLeft;\n\n  var scrollToThumbnail = function (target) {\n    var container = containerRef.current;\n\n    if (container) {\n      scrollToBeVisible(target.parentElement, container);\n    }\n  };\n\n  var handleKeyDown = function (e) {\n    switch (e.key) {\n      case 'ArrowDown':\n        activateNextItem();\n        break;\n\n      case 'ArrowUp':\n        activatePreviousItem();\n        break;\n\n      case 'Enter':\n        jumpToFocusedPage();\n        break;\n    }\n  };\n\n  var activateNextItem = function () {\n    var container = containerRef.current;\n\n    if (!container) {\n      return;\n    }\n\n    var items = thumbnailsRef.current;\n    var nextItem = currentFocused + 1;\n\n    if (nextItem < items.length) {\n      if (currentFocused >= 0) {\n        items[currentFocused].setAttribute('tabindex', '-1');\n      }\n\n      setCurrentFocused(nextItem);\n    }\n  };\n\n  var activatePreviousItem = function () {\n    var container = containerRef.current;\n\n    if (!container) {\n      return;\n    }\n\n    var items = thumbnailsRef.current;\n    var prevItem = currentFocused - 1;\n\n    if (prevItem >= 0) {\n      if (currentFocused >= 0) {\n        items[currentFocused].setAttribute('tabindex', '-1');\n      }\n\n      setCurrentFocused(prevItem);\n    }\n  };\n\n  var jumpToFocusedPage = function () {\n    if (currentFocused >= 0 && currentFocused < numPages) {\n      onJumpToPage(currentFocused);\n    }\n  };\n\n  core.useIsomorphicLayoutEffect(function () {\n    var container = containerRef.current;\n\n    if (!container) {\n      return;\n    }\n\n    thumbnailsRef.current = Array.from(container.querySelectorAll('.rpv-thumbnail__item'));\n  }, []);\n  React__namespace.useEffect(function () {\n    var thumbnails = thumbnailsRef.current;\n\n    if (thumbnails.length === 0 || currentFocused < 0 || currentFocused > thumbnails.length) {\n      return;\n    }\n\n    var thumbnailEle = thumbnails[currentFocused];\n    thumbnailEle.setAttribute('tabindex', '0');\n    thumbnailEle.focus();\n  }, [currentFocused]);\n  return React__namespace.createElement(LabelsLoader, {\n    doc: doc\n  }, function (labels) {\n    var numLabels = labels.length;\n    return React__namespace.createElement(\"div\", {\n      ref: containerRef,\n      \"data-testid\": \"thumbnail__list\",\n      className: core.classNames({\n        'rpv-thumbnail__list': true,\n        'rpv-thumbnail__list--rtl': isRtl\n      }),\n      onKeyDown: handleKeyDown\n    }, Array(numPages).fill(0).map(function (_, pageIndex) {\n      var pageLabel = numLabels === numPages ? labels[pageIndex] : \"\" + (pageIndex + 1);\n      var label = renderCurrentPageLabel ? renderCurrentPageLabel({\n        currentPage: currentPage,\n        pageIndex: pageIndex,\n        numPages: numPages,\n        pageLabel: pageLabel\n      }) : pageLabel;\n      return React__namespace.createElement(\"div\", {\n        key: \"thumbnail-\" + pageIndex\n      }, React__namespace.createElement(\"div\", {\n        className: core.classNames({\n          'rpv-thumbnail__item': true,\n          'rpv-thumbnail__item--selected': currentPage === pageIndex\n        }),\n        role: \"button\",\n        tabIndex: currentPage === pageIndex ? 0 : -1,\n        onClick: function () {\n          return onJumpToPage(pageIndex);\n        }\n      }, React__namespace.createElement(ThumbnailContainer, {\n        doc: doc,\n        isActive: currentPage === pageIndex,\n        pageHeight: pageHeight,\n        pageIndex: pageIndex,\n        pageWidth: pageWidth,\n        rotation: rotation,\n        onActive: scrollToThumbnail\n      })), React__namespace.createElement(\"div\", {\n        className: \"rpv-thumbnail__index\"\n      }, label));\n    }));\n  });\n};\n\nvar ThumbnailListWithStore = function (_a) {\n  var renderCurrentPageLabel = _a.renderCurrentPageLabel,\n      store = _a.store;\n\n  var _b = React__namespace.useState(store.get('doc')),\n      currentDoc = _b[0],\n      setCurrentDoc = _b[1];\n\n  var _c = React__namespace.useState(store.get('currentPage') || 0),\n      currentPage = _c[0],\n      setCurrentPage = _c[1];\n\n  var _d = React__namespace.useState(store.get('pageHeight') || 0),\n      pageHeight = _d[0],\n      setPageHeight = _d[1];\n\n  var _e = React__namespace.useState(store.get('pageWidth') || 0),\n      pageWidth = _e[0],\n      setPageWidth = _e[1];\n\n  var _f = React__namespace.useState(store.get('rotation') || 0),\n      rotation = _f[0],\n      setRotation = _f[1];\n\n  var handleCurrentPageChanged = function (currentPageIndex) {\n    setCurrentPage(currentPageIndex);\n  };\n\n  var handleDocumentChanged = function (doc) {\n    setCurrentDoc(doc);\n  };\n\n  var handlePageHeightChanged = function (height) {\n    setPageHeight(height);\n  };\n\n  var handlePageWidthChanged = function (width) {\n    setPageWidth(width);\n  };\n\n  var handleRotationChanged = function (currentRotation) {\n    setRotation(currentRotation);\n  };\n\n  var jump = function (pageIndex) {\n    var jumpToPage = store.get('jumpToPage');\n\n    if (jumpToPage) {\n      jumpToPage(pageIndex);\n    }\n  };\n\n  React__namespace.useEffect(function () {\n    store.subscribe('doc', handleDocumentChanged);\n    store.subscribe('pageHeight', handlePageHeightChanged);\n    store.subscribe('pageWidth', handlePageWidthChanged);\n    store.subscribe('rotation', handleRotationChanged);\n    return function () {\n      store.unsubscribe('doc', handleDocumentChanged);\n      store.unsubscribe('pageHeight', handlePageHeightChanged);\n      store.unsubscribe('pageWidth', handlePageWidthChanged);\n      store.unsubscribe('rotation', handleRotationChanged);\n    };\n  }, []);\n  core.useIsomorphicLayoutEffect(function () {\n    store.subscribe('currentPage', handleCurrentPageChanged);\n    return function () {\n      store.unsubscribe('currentPage', handleCurrentPageChanged);\n    };\n  }, []);\n  return currentDoc ? React__namespace.createElement(ThumbnailList, {\n    currentPage: currentPage,\n    doc: currentDoc,\n    pageHeight: pageHeight,\n    pageWidth: pageWidth,\n    renderCurrentPageLabel: renderCurrentPageLabel,\n    rotation: rotation,\n    onJumpToPage: jump\n  }) : React__namespace.createElement(\"div\", {\n    className: \"rpv-thumbnail__loader\"\n  }, React__namespace.createElement(core.Spinner, null));\n};\n\nvar thumbnailPlugin = function (props) {\n  var store = React__namespace.useMemo(function () {\n    return core.createStore({});\n  }, []);\n\n  var CoverDecorator = function (props) {\n    return React__namespace.createElement(Cover, __assign({}, props, {\n      store: store\n    }));\n  };\n\n  var ThumbnailsDecorator = function () {\n    return React__namespace.createElement(ThumbnailListWithStore, {\n      renderCurrentPageLabel: props === null || props === void 0 ? void 0 : props.renderCurrentPageLabel,\n      store: store\n    });\n  };\n\n  return {\n    install: function (pluginFunctions) {\n      store.update('jumpToPage', pluginFunctions.jumpToPage);\n    },\n    onDocumentLoad: function (props) {\n      store.update('doc', props.doc);\n    },\n    onViewerStateChange: function (viewerState) {\n      store.update('currentPage', viewerState.pageIndex);\n      store.update('pageHeight', viewerState.pageHeight);\n      store.update('pageWidth', viewerState.pageWidth);\n      return viewerState;\n    },\n    Cover: CoverDecorator,\n    Thumbnails: ThumbnailsDecorator\n  };\n};\n\nexports.thumbnailPlugin = thumbnailPlugin;","map":{"version":3,"sources":["/Users/williamrockwellevans/Documents/GitHub/Communication-User-Tool/node_modules/@react-pdf-viewer/thumbnail/lib/cjs/thumbnail.js"],"names":["Object","defineProperty","exports","value","React","require","core","_interopNamespace","e","__esModule","n","create","keys","forEach","k","d","getOwnPropertyDescriptor","get","enumerable","freeze","React__namespace","__assign","assign","t","s","i","arguments","length","p","prototype","hasOwnProperty","call","apply","Cover","_a","getPageIndex","store","_b","useState","currentDoc","setCurrentDoc","handleDocumentChanged","doc","devicePixelRatio","window","canvasRef","useRef","containerRef","_c","rendered","setRendered","useEffect","containerEle","current","canvasEle","numPages","targetPage","normalizePage","Math","max","min","getPage","then","page","viewport","getViewport","scale","w","width","h","height","containerWidth","clientWidth","containerHeight","clientHeight","scaled","canvasWidth","canvasHeight","style","opacity","canvasContext","getContext","alpha","renderViewport","rotation","renderTask","render","promise","removeProperty","subscribe","unsubscribe","createElement","className","ref","Spinner","transform","transformOrigin","LabelsLoader","children","labels","setLabels","getPageLabels","scrollToBeVisible","ele","container","top","getBoundingClientRect","eleHeight","scrollTop","ThumbnailItem","pageHeight","pageIndex","pageWidth","thumbnailHeight","thumbnailWidth","l10n","useContext","LocalizationContext","src","setSrc","thumbnailLabel","thumbnail","task","cancel","canvas","document","toDataURL","replace","THUMBNAIL_WIDTH","ThumbnailContainer","isActive","onActive","isCalculated","viewportRotation","pageSize","setPageSize","visibilityRef","isVisible","ratio","isVertical","abs","useLayoutEffect","visibility","onVisibilityChanged","params","pdfPage","rotationNumber","useIntersectionObserver","ThumbnailList","currentPage","renderCurrentPageLabel","onJumpToPage","thumbnailsRef","currentFocused","setCurrentFocused","direction","ThemeContext","isRtl","TextDirection","RightToLeft","scrollToThumbnail","target","parentElement","handleKeyDown","key","activateNextItem","activatePreviousItem","jumpToFocusedPage","items","nextItem","setAttribute","prevItem","useIsomorphicLayoutEffect","Array","from","querySelectorAll","thumbnails","thumbnailEle","focus","numLabels","classNames","onKeyDown","fill","map","_","pageLabel","label","role","tabIndex","onClick","ThumbnailListWithStore","setCurrentPage","_d","setPageHeight","_e","setPageWidth","_f","setRotation","handleCurrentPageChanged","currentPageIndex","handlePageHeightChanged","handlePageWidthChanged","handleRotationChanged","currentRotation","jump","jumpToPage","thumbnailPlugin","props","useMemo","createStore","CoverDecorator","ThumbnailsDecorator","install","pluginFunctions","update","onDocumentLoad","onViewerStateChange","viewerState","Thumbnails"],"mappings":"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","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\nvar React = require('react');\nvar core = require('@react-pdf-viewer/core');\n\nfunction _interopNamespace(e) {\n    if (e && e.__esModule) return e;\n    var n = Object.create(null);\n    if (e) {\n        Object.keys(e).forEach(function (k) {\n            if (k !== 'default') {\n                var d = Object.getOwnPropertyDescriptor(e, k);\n                Object.defineProperty(n, k, d.get ? d : {\n                    enumerable: true,\n                    get: function () { return e[k]; }\n                });\n            }\n        });\n    }\n    n[\"default\"] = e;\n    return Object.freeze(n);\n}\n\nvar React__namespace = /*#__PURE__*/_interopNamespace(React);\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n\r\nvar __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\n\nvar Cover = function (_a) {\n    var getPageIndex = _a.getPageIndex, store = _a.store;\n    var _b = React__namespace.useState(), currentDoc = _b[0], setCurrentDoc = _b[1];\n    var handleDocumentChanged = function (doc) {\n        setCurrentDoc(doc);\n    };\n    var devicePixelRatio = window.devicePixelRatio || 1;\n    var canvasRef = React__namespace.useRef();\n    var containerRef = React__namespace.useRef();\n    var _c = React__namespace.useState(false), rendered = _c[0], setRendered = _c[1];\n    React__namespace.useEffect(function () {\n        if (!currentDoc) {\n            return;\n        }\n        var containerEle = containerRef.current;\n        var canvasEle = canvasRef.current;\n        if (!containerEle || !canvasEle) {\n            return;\n        }\n        var numPages = currentDoc.numPages;\n        var targetPage = getPageIndex ? getPageIndex({ numPages: numPages }) : 0;\n        var normalizePage = Math.max(0, Math.min(targetPage, numPages - 1));\n        currentDoc.getPage(normalizePage + 1).then(function (page) {\n            var viewport = page.getViewport({ scale: 1 });\n            var w = viewport.width;\n            var h = viewport.height;\n            var containerWidth = containerEle.clientWidth;\n            var containerHeight = containerEle.clientHeight;\n            var scaled = Math.min(containerWidth / w, containerHeight / h);\n            var canvasWidth = scaled * w;\n            var canvasHeight = scaled * h;\n            canvasEle.height = canvasHeight * devicePixelRatio;\n            canvasEle.width = canvasWidth * devicePixelRatio;\n            canvasEle.style.opacity = '0';\n            var canvasContext = canvasEle.getContext('2d', {\n                alpha: false,\n            });\n            var renderViewport = page.getViewport({\n                rotation: 0,\n                scale: scaled * devicePixelRatio,\n            });\n            var renderTask = page.render({ canvasContext: canvasContext, viewport: renderViewport });\n            renderTask.promise.then(function () {\n                setRendered(true);\n                canvasEle.style.removeProperty('opacity');\n            }, function () {\n                setRendered(true);\n            });\n        });\n    }, [currentDoc]);\n    React__namespace.useEffect(function () {\n        store.subscribe('doc', handleDocumentChanged);\n        return function () {\n            store.unsubscribe('doc', handleDocumentChanged);\n        };\n    }, []);\n    return (React__namespace.createElement(\"div\", { className: \"rpv-thumbnail__cover\", ref: containerRef },\n        !rendered && (React__namespace.createElement(\"div\", { className: \"rpv-thumbnail__cover-loader\" },\n            React__namespace.createElement(core.Spinner, null))),\n        React__namespace.createElement(\"canvas\", { ref: canvasRef, style: {\n                transform: \"scale(\" + 1 / devicePixelRatio + \")\",\n                transformOrigin: \"top left\",\n            } })));\n};\n\nvar LabelsLoader = function (_a) {\n    var children = _a.children, doc = _a.doc;\n    var _b = React__namespace.useState(), labels = _b[0], setLabels = _b[1];\n    React__namespace.useEffect(function () {\n        doc.getPageLabels().then(function (labels) {\n            setLabels(labels || []);\n        });\n    }, [doc]);\n    return labels ? (children(labels)) : (React__namespace.createElement(\"div\", { className: \"rpv-thumbnail__loader\" },\n        React__namespace.createElement(core.Spinner, null)));\n};\n\nvar scrollToBeVisible = function (ele, container) {\n    var top = ele.getBoundingClientRect().top - container.getBoundingClientRect().top;\n    var eleHeight = ele.clientHeight;\n    var containerHeight = container.clientHeight;\n    if (top < 0) {\n        container.scrollTop += top;\n        return;\n    }\n    if (top + eleHeight <= containerHeight) {\n        return;\n    }\n    container.scrollTop += top + eleHeight - containerHeight;\n};\n\nvar ThumbnailItem = function (_a) {\n    var page = _a.page, pageHeight = _a.pageHeight, pageIndex = _a.pageIndex, pageWidth = _a.pageWidth, rotation = _a.rotation, thumbnailHeight = _a.thumbnailHeight, thumbnailWidth = _a.thumbnailWidth;\n    var l10n = React__namespace.useContext(core.LocalizationContext).l10n;\n    var renderTask = React__namespace.useRef();\n    var _b = React__namespace.useState(''), src = _b[0], setSrc = _b[1];\n    var thumbnailLabel = (l10n && l10n.thumbnail ? l10n.thumbnail.thumbnailLabel : 'Thumbnail of page {{pageIndex}}');\n    React__namespace.useEffect(function () {\n        var task = renderTask.current;\n        if (task) {\n            task.cancel();\n        }\n        var canvas = document.createElement('canvas');\n        var canvasContext = canvas.getContext('2d', {\n            alpha: false,\n        });\n        var w = thumbnailWidth;\n        var h = w / (pageWidth / pageHeight);\n        var scale = w / pageWidth;\n        canvas.height = h;\n        canvas.width = w;\n        canvas.style.height = h + \"px\";\n        canvas.style.width = w + \"px\";\n        var viewport = page.getViewport({ rotation: rotation, scale: scale });\n        renderTask.current = page.render({ canvasContext: canvasContext, viewport: viewport });\n        renderTask.current.promise.then(function () { return setSrc(canvas.toDataURL()); }, function () {\n        });\n    }, [rotation]);\n    return !src ? (React__namespace.createElement(core.Spinner, null)) : (React__namespace.createElement(\"img\", { \"aria-label\": thumbnailLabel.replace('{{pageIndex}}', \"\" + (pageIndex + 1)), src: src, height: thumbnailHeight + \"px\", width: thumbnailWidth + \"px\" }));\n};\n\nvar THUMBNAIL_WIDTH = 100;\nvar ThumbnailContainer = function (_a) {\n    var doc = _a.doc, isActive = _a.isActive, pageHeight = _a.pageHeight, pageIndex = _a.pageIndex, pageWidth = _a.pageWidth, rotation = _a.rotation, onActive = _a.onActive;\n    var _b = React__namespace.useState({\n        height: pageHeight,\n        isCalculated: false,\n        page: null,\n        viewportRotation: 0,\n        width: pageWidth,\n    }), pageSize = _b[0], setPageSize = _b[1];\n    var visibilityRef = React__namespace.useRef({\n        isVisible: false,\n        ratio: 0,\n    });\n    var isCalculated = pageSize.isCalculated, page = pageSize.page, height = pageSize.height, width = pageSize.width;\n    var scale = width / height;\n    var isVertical = Math.abs(rotation) % 180 === 0;\n    var w = isVertical ? THUMBNAIL_WIDTH : THUMBNAIL_WIDTH / scale;\n    var h = isVertical ? THUMBNAIL_WIDTH / scale : THUMBNAIL_WIDTH;\n    React__namespace.useLayoutEffect(function () {\n        if (!isActive) {\n            return;\n        }\n        var ele = containerRef.current;\n        var visibility = visibilityRef.current;\n        if (!visibility.isVisible || visibility.ratio < 1) {\n            onActive(ele);\n        }\n    }, [isActive]);\n    var onVisibilityChanged = function (params) {\n        visibilityRef.current = params;\n        if (params.isVisible && !isCalculated) {\n            doc.getPage(pageIndex + 1).then(function (pdfPage) {\n                var viewport = pdfPage.getViewport({ scale: 1 });\n                setPageSize({\n                    height: viewport.height,\n                    isCalculated: true,\n                    page: pdfPage,\n                    viewportRotation: viewport.rotation,\n                    width: viewport.width,\n                });\n            });\n        }\n    };\n    var rotationNumber = (rotation + pageSize.viewportRotation) % 360;\n    var containerRef = core.useIntersectionObserver({\n        onVisibilityChanged: onVisibilityChanged,\n    });\n    return (React__namespace.createElement(\"div\", { className: \"rpv-thumbnail__container\", ref: containerRef, style: {\n            height: h + \"px\",\n            width: w + \"px\",\n        } }, !page ? (React__namespace.createElement(core.Spinner, null)) : (React__namespace.createElement(ThumbnailItem, { page: page, pageHeight: isVertical ? height : width, pageIndex: pageIndex, pageWidth: isVertical ? width : height, rotation: rotationNumber, thumbnailHeight: h, thumbnailWidth: w }))));\n};\n\nvar ThumbnailList = function (_a) {\n    var currentPage = _a.currentPage, doc = _a.doc, pageHeight = _a.pageHeight, pageWidth = _a.pageWidth, renderCurrentPageLabel = _a.renderCurrentPageLabel, rotation = _a.rotation, onJumpToPage = _a.onJumpToPage;\n    var numPages = doc.numPages;\n    var containerRef = React__namespace.useRef(null);\n    var thumbnailsRef = React__namespace.useRef([]);\n    var _b = React__namespace.useState(currentPage), currentFocused = _b[0], setCurrentFocused = _b[1];\n    var direction = React__namespace.useContext(core.ThemeContext).direction;\n    var isRtl = direction === core.TextDirection.RightToLeft;\n    var scrollToThumbnail = function (target) {\n        var container = containerRef.current;\n        if (container) {\n            scrollToBeVisible(target.parentElement, container);\n        }\n    };\n    var handleKeyDown = function (e) {\n        switch (e.key) {\n            case 'ArrowDown':\n                activateNextItem();\n                break;\n            case 'ArrowUp':\n                activatePreviousItem();\n                break;\n            case 'Enter':\n                jumpToFocusedPage();\n                break;\n        }\n    };\n    var activateNextItem = function () {\n        var container = containerRef.current;\n        if (!container) {\n            return;\n        }\n        var items = thumbnailsRef.current;\n        var nextItem = currentFocused + 1;\n        if (nextItem < items.length) {\n            if (currentFocused >= 0) {\n                items[currentFocused].setAttribute('tabindex', '-1');\n            }\n            setCurrentFocused(nextItem);\n        }\n    };\n    var activatePreviousItem = function () {\n        var container = containerRef.current;\n        if (!container) {\n            return;\n        }\n        var items = thumbnailsRef.current;\n        var prevItem = currentFocused - 1;\n        if (prevItem >= 0) {\n            if (currentFocused >= 0) {\n                items[currentFocused].setAttribute('tabindex', '-1');\n            }\n            setCurrentFocused(prevItem);\n        }\n    };\n    var jumpToFocusedPage = function () {\n        if (currentFocused >= 0 && currentFocused < numPages) {\n            onJumpToPage(currentFocused);\n        }\n    };\n    core.useIsomorphicLayoutEffect(function () {\n        var container = containerRef.current;\n        if (!container) {\n            return;\n        }\n        thumbnailsRef.current = Array.from(container.querySelectorAll('.rpv-thumbnail__item'));\n    }, []);\n    React__namespace.useEffect(function () {\n        var thumbnails = thumbnailsRef.current;\n        if (thumbnails.length === 0 || currentFocused < 0 || currentFocused > thumbnails.length) {\n            return;\n        }\n        var thumbnailEle = thumbnails[currentFocused];\n        thumbnailEle.setAttribute('tabindex', '0');\n        thumbnailEle.focus();\n    }, [currentFocused]);\n    return (React__namespace.createElement(LabelsLoader, { doc: doc }, function (labels) {\n        var numLabels = labels.length;\n        return (React__namespace.createElement(\"div\", { ref: containerRef, \"data-testid\": \"thumbnail__list\", className: core.classNames({\n                'rpv-thumbnail__list': true,\n                'rpv-thumbnail__list--rtl': isRtl,\n            }), onKeyDown: handleKeyDown }, Array(numPages)\n            .fill(0)\n            .map(function (_, pageIndex) {\n            var pageLabel = numLabels === numPages ? labels[pageIndex] : \"\" + (pageIndex + 1);\n            var label = renderCurrentPageLabel\n                ? renderCurrentPageLabel({ currentPage: currentPage, pageIndex: pageIndex, numPages: numPages, pageLabel: pageLabel })\n                : pageLabel;\n            return (React__namespace.createElement(\"div\", { key: \"thumbnail-\" + pageIndex },\n                React__namespace.createElement(\"div\", { className: core.classNames({\n                        'rpv-thumbnail__item': true,\n                        'rpv-thumbnail__item--selected': currentPage === pageIndex,\n                    }), role: \"button\", tabIndex: currentPage === pageIndex ? 0 : -1, onClick: function () { return onJumpToPage(pageIndex); } },\n                    React__namespace.createElement(ThumbnailContainer, { doc: doc, isActive: currentPage === pageIndex, pageHeight: pageHeight, pageIndex: pageIndex, pageWidth: pageWidth, rotation: rotation, onActive: scrollToThumbnail })),\n                React__namespace.createElement(\"div\", { className: \"rpv-thumbnail__index\" }, label)));\n        })));\n    }));\n};\n\nvar ThumbnailListWithStore = function (_a) {\n    var renderCurrentPageLabel = _a.renderCurrentPageLabel, store = _a.store;\n    var _b = React__namespace.useState(store.get('doc')), currentDoc = _b[0], setCurrentDoc = _b[1];\n    var _c = React__namespace.useState(store.get('currentPage') || 0), currentPage = _c[0], setCurrentPage = _c[1];\n    var _d = React__namespace.useState(store.get('pageHeight') || 0), pageHeight = _d[0], setPageHeight = _d[1];\n    var _e = React__namespace.useState(store.get('pageWidth') || 0), pageWidth = _e[0], setPageWidth = _e[1];\n    var _f = React__namespace.useState(store.get('rotation') || 0), rotation = _f[0], setRotation = _f[1];\n    var handleCurrentPageChanged = function (currentPageIndex) {\n        setCurrentPage(currentPageIndex);\n    };\n    var handleDocumentChanged = function (doc) {\n        setCurrentDoc(doc);\n    };\n    var handlePageHeightChanged = function (height) {\n        setPageHeight(height);\n    };\n    var handlePageWidthChanged = function (width) {\n        setPageWidth(width);\n    };\n    var handleRotationChanged = function (currentRotation) {\n        setRotation(currentRotation);\n    };\n    var jump = function (pageIndex) {\n        var jumpToPage = store.get('jumpToPage');\n        if (jumpToPage) {\n            jumpToPage(pageIndex);\n        }\n    };\n    React__namespace.useEffect(function () {\n        store.subscribe('doc', handleDocumentChanged);\n        store.subscribe('pageHeight', handlePageHeightChanged);\n        store.subscribe('pageWidth', handlePageWidthChanged);\n        store.subscribe('rotation', handleRotationChanged);\n        return function () {\n            store.unsubscribe('doc', handleDocumentChanged);\n            store.unsubscribe('pageHeight', handlePageHeightChanged);\n            store.unsubscribe('pageWidth', handlePageWidthChanged);\n            store.unsubscribe('rotation', handleRotationChanged);\n        };\n    }, []);\n    core.useIsomorphicLayoutEffect(function () {\n        store.subscribe('currentPage', handleCurrentPageChanged);\n        return function () {\n            store.unsubscribe('currentPage', handleCurrentPageChanged);\n        };\n    }, []);\n    return currentDoc ? (React__namespace.createElement(ThumbnailList, { currentPage: currentPage, doc: currentDoc, pageHeight: pageHeight, pageWidth: pageWidth, renderCurrentPageLabel: renderCurrentPageLabel, rotation: rotation, onJumpToPage: jump })) : (React__namespace.createElement(\"div\", { className: \"rpv-thumbnail__loader\" },\n        React__namespace.createElement(core.Spinner, null)));\n};\n\nvar thumbnailPlugin = function (props) {\n    var store = React__namespace.useMemo(function () { return core.createStore({}); }, []);\n    var CoverDecorator = function (props) { return React__namespace.createElement(Cover, __assign({}, props, { store: store })); };\n    var ThumbnailsDecorator = function () { return (React__namespace.createElement(ThumbnailListWithStore, { renderCurrentPageLabel: props === null || props === void 0 ? void 0 : props.renderCurrentPageLabel, store: store })); };\n    return {\n        install: function (pluginFunctions) {\n            store.update('jumpToPage', pluginFunctions.jumpToPage);\n        },\n        onDocumentLoad: function (props) {\n            store.update('doc', props.doc);\n        },\n        onViewerStateChange: function (viewerState) {\n            store.update('currentPage', viewerState.pageIndex);\n            store.update('pageHeight', viewerState.pageHeight);\n            store.update('pageWidth', viewerState.pageWidth);\n            return viewerState;\n        },\n        Cover: CoverDecorator,\n        Thumbnails: ThumbnailsDecorator,\n    };\n};\n\nexports.thumbnailPlugin = thumbnailPlugin;\n"]},"metadata":{},"sourceType":"script"}